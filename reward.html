<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>REWARD PROTOCOL</title>
<style>
  :root {
    --bg: #050505;
    --neon-green: #00ff41;
    --neon-gold: #ffd700;
    --neon-red: #ff003c;
    --glass: rgba(255, 255, 255, 0.05);
  }
  body {
    margin: 0; height: 100vh;
    background: radial-gradient(circle at center, #111, #000 90%);
    font-family: 'Courier New', monospace;
    color: white; overflow: hidden;
    display: flex; justify-content: center; align-items: center;
    flex-direction: column;
  }

  /* --- AUTH OVERLAY --- */
  .auth-overlay {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: #000; z-index: 100;
    display: flex; justify-content: center; align-items: center; flex-direction: column;
    transition: transform 0.8s cubic-bezier(0.7, 0, 0.3, 1);
  }
  .auth-box {
    border: 1px solid #333; padding: 40px; text-align: center;
    box-shadow: 0 0 50px rgba(0,255,65,0.1);
    background: #050505;
  }
  .auth-input {
    background: transparent; border: none; border-bottom: 2px solid #333;
    color: var(--neon-green); font-size: 24px; text-align: center;
    width: 300px; margin-top: 20px; outline: none; letter-spacing: 2px;
    text-transform: uppercase; padding: 10px;
  }
  .auth-btn {
    margin-top: 30px; padding: 15px 40px;
    background: transparent; border: 1px solid var(--neon-green);
    color: var(--neon-green); font-size: 16px; cursor: pointer;
    transition: 0.3s; letter-spacing: 2px;
  }
  .auth-btn:hover { background: var(--neon-green); color: black; box-shadow: 0 0 20px var(--neon-green); }

  /* --- THE WHEEL CONTAINER --- */
  .machine-container {
    position: relative;
    width: 500px; height: 500px;
    border-radius: 50%;
    border: 10px solid #222;
    box-shadow: 0 0 50px rgba(0,0,0,0.8), inset 0 0 50px #000;
    background: #080808;
    display: flex; justify-content: center; align-items: center;
    opacity: 0; transform: scale(0.8); transition: 1s; /* Hidden initially */
  }

  /* THE POINTER (MARKER) */
  .marker {
    position: absolute; top: -20px; left: 50%; transform: translateX(-50%);
    width: 0; height: 0;
    border-left: 15px solid transparent;
    border-right: 15px solid transparent;
    border-top: 40px solid var(--neon-gold);
    filter: drop-shadow(0 0 10px var(--neon-gold));
    z-index: 10;
  }

  /* THE WHEEL DISC */
  .wheel {
    width: 100%; height: 100%;
    border-radius: 50%;
    position: relative;
    transition: transform 5s cubic-bezier(0.1, 0, 0.1, 1); /* Physics Easing */
    background: conic-gradient(
      #111 0% 12.5%, #1a1a1a 12.5% 25%, 
      #111 25% 37.5%, #1a1a1a 37.5% 50%, 
      #111 50% 62.5%, #1a1a1a 62.5% 75%, 
      #111 75% 87.5%, #1a1a1a 87.5% 100%
    );
    box-shadow: 0 0 20px rgba(0,255,65,0.1);
  }
  
  /* SEGMENT TEXT */
  .segment {
    position: absolute; top: 50%; left: 50%;
    width: 50%; height: 2px;
    background: transparent;
    transform-origin: left;
    display: flex; justify-content: flex-end;
    align-items: center;
  }
  .segment-label {
    margin-right: 20px; font-weight: bold; font-size: 14px; color: #fff;
    text-shadow: 0 0 5px black; width: 120px; text-align: right;
    transform: rotate(90deg); /* Orient text out */
  }

  /* CENTER HUB (SPIN BUTTON) */
  .hub {
    position: absolute; width: 100px; height: 100px;
    background: #000; border: 4px solid var(--neon-green);
    border-radius: 50%; z-index: 5;
    display: flex; justify-content: center; align-items: center;
    cursor: pointer; box-shadow: 0 0 30px var(--neon-green);
    transition: 0.2s;
  }
  .hub:hover { transform: scale(1.1); box-shadow: 0 0 50px var(--neon-green); }
  .hub:active { transform: scale(0.95); }
  .hub span { color: var(--neon-green); font-weight: bold; font-size: 18px; letter-spacing: 2px; }

  /* --- RESULT MODAL --- */
  .modal-overlay {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(0,0,0,0.9); z-index: 200;
    display: none; justify-content: center; align-items: center; flex-direction: column;
    animation: fadeIn 0.5s;
  }
  .prize-card {
    border: 2px solid var(--neon-gold); background: #050505;
    padding: 50px; text-align: center; position: relative;
    box-shadow: 0 0 50px rgba(212, 175, 55, 0.3);
    max-width: 500px;
  }
  .prize-title { color: #888; font-size: 14px; margin-bottom: 20px; }
  .prize-name { color: var(--neon-gold); font-size: 36px; font-weight: bold; margin-bottom: 30px; text-shadow: 0 0 20px var(--neon-gold); }
  .claim-btn {
    background: var(--neon-gold); color: black; border: none;
    padding: 15px 30px; font-weight: bold; font-size: 18px; cursor: pointer;
  }

  @keyframes fadeIn { from {opacity:0;} to {opacity:1;} }
  @keyframes spinLoad { 0% {transform: rotate(0deg);} 100% {transform: rotate(360deg);} }

</style>
</head>
<body>

<div class="auth-overlay" id="authLayer">
  <div class="auth-box">
    <div style="color:var(--neon-green); font-size:30px; margin-bottom:10px;">PROTOCOL: ALLOCATOR</div>
    <div style="color:#555; font-size:12px;">ENTER LAUNCH CODE FROM LEVEL 5</div>
    <input type="text" class="auth-input" id="code" placeholder="LAUNCH-VIP-001">
    <br>
    <button class="auth-btn" onclick="verifyCode()">VERIFY IDENTITY</button>
    <div id="loading" style="display:none; margin-top:20px; color:var(--neon-green);">DECRYPTING...</div>
  </div>
</div>

<h2 style="letter-spacing:5px; opacity:0;" id="title">ASSET ALLOCATION</h2>
<div class="machine-container" id="machine">
  <div class="marker"></div>
  
  <div class="wheel" id="wheel">
    </div>

  <div class="hub" onclick="spinWheel()" id="spinBtn">
    <span>SPIN</span>
  </div>
</div>

<div class="modal-overlay" id="resultModal">
  <div class="prize-card">
    <div class="prize-title">ASSET ALLOCATED</div>
    <div class="prize-name" id="prizeDisplay">LOADING...</div>
    <p style="color:#555; font-size:12px;">Send a screenshot of this page to Support.</p>
    <br>
    <button class="claim-btn" onclick="alert('Redirecting to WhatsApp/Email...')">CLAIM REWARD</button>
  </div>
</div>

<script>
  // --- CONFIGURATION ---
  // "weight": Higher number = More likely to win
  const PRIZES = [
    { label: "10% OFF", weight: 50, color: "#fff" },
    { label: "TRADING PDF", weight: 40, color: "#aaa" },
    { label: "5% OFF", weight: 40, color: "#fff" },
    { label: "PROP LOGS", weight: 15, color: "#00ff41" }, // Green (Good)
    { label: "20% OFF", weight: 10, color: "#fff" },
    { label: "1 MONTH FREE UPON LAUNCH", weight: 5, color: "#00ff41" }, // Green (Great)
    { label: "1-ON-1 CALL", weight: 2, color: "#ffd700" }, // Gold (Rare)
    { label: "$3 CASH", weight: 1, color: "#ffd700" }     // Gold (Jackpot)
  ];

  // LEVEL 5 CODE
  const VALID_CODE = "LAUNCH-VIP-001"; 

  // --- STATE ---
  const wheel = document.getElementById('wheel');
  let currentRotation = 0;
  let isSpinning = false;
  const numSegments = PRIZES.length;
  const segmentAngle = 360 / numSegments;

  // 1. SETUP WHEEL
  function initWheel() {
    PRIZES.forEach((prize, index) => {
      const segment = document.createElement('div');
      segment.className = 'segment';
      // Rotate the segment container to position it
      // Add half segment angle to center the text
      const rotate = (index * segmentAngle) + (segmentAngle / 2);
      segment.style.transform = `rotate(${rotate}deg)`;
      
      // Create Label
      const label = document.createElement('div');
      label.className = 'segment-label';
      label.innerText = prize.label;
      label.style.color = prize.color;
      
      segment.appendChild(label);
      wheel.appendChild(segment);
    });
  }
  initWheel();

  // 2. VERIFY CODE
  function verifyCode() {
    const input = document.getElementById('code').value.toUpperCase().trim();
    const btn = document.querySelector('.auth-btn');
    const loading = document.getElementById('loading');
    
    if (input === VALID_CODE) {
      btn.style.display = 'none';
      loading.style.display = 'block';
      
      // Fake loading time for effect
      setTimeout(() => {
        document.getElementById('authLayer').style.transform = "translateY(-100%)"; // Slide up
        setTimeout(() => {
            document.getElementById('machine').style.opacity = 1;
            document.getElementById('machine').style.transform = "scale(1)";
            document.getElementById('title').style.opacity = 1;
        }, 500);
      }, 1500);
    } else {
      alert("INVALID CODE. COMPLETE LEVEL 5 FIRST.");
    }
  }

  // 3. WEIGHTED RANDOM SELECTOR
  function getWeightedPrize() {
    let totalWeight = PRIZES.reduce((sum, p) => sum + p.weight, 0);
    let random = Math.random() * totalWeight;
    
    for (let i = 0; i < PRIZES.length; i++) {
      if (random < PRIZES[i].weight) {
        return i; // Return index of winner
      }
      random -= PRIZES[i].weight;
    }
    return 0; // Default
  }

  // 4. SPIN LOGIC
  function spinWheel() {
    if (isSpinning) return;
    isSpinning = true;
    document.getElementById('spinBtn').style.opacity = 0.5;

    // Determine Winner in advance
    const winningIndex = getWeightedPrize();
    const winningPrize = PRIZES[winningIndex];
    console.log("Predetermined Winner:", winningPrize.label);

    // --- FIX: ROTATION LOGIC ---
    // 270 offset accounts for CSS rotation start point (90deg) vs Top (0deg)
    // Formula: Target = 270 - (Index * Angle) - (Angle / 2)
    const variance = (Math.random() * (segmentAngle - 4)) - (segmentAngle/2 - 2); 
    const targetAngle = (270 - (winningIndex * segmentAngle) - (segmentAngle / 2) + variance);
    
    // Calculate Delta for smooth forward spin
    const currentMod = currentRotation % 360;
    let dist = targetAngle - currentMod;
    if (dist < 0) dist += 360; // Ensure positive rotation
    
    // Add extra spins (min 5 full rotations)
    const extraSpins = 360 * 5; 
    const finalRotation = currentRotation + extraSpins + dist;

    // Apply CSS
    wheel.style.transform = `rotate(${finalRotation}deg)`;
    currentRotation = finalRotation; // Store for next time

    // Wait for animation (5 seconds)
    setTimeout(() => {
      showResult(winningPrize);
    }, 5000);
  }

  function showResult(prize) {
    const modal = document.getElementById('resultModal');
    const display = document.getElementById('prizeDisplay');
    
    modal.style.display = 'flex';
    display.innerText = prize.label;
    display.style.color = prize.color;
    
    if (prize.label.includes("CASH") || prize.label.includes("FREE")) {
        display.style.textShadow = "0 0 30px " + prize.color;
        // Trigger confetti (Optional visual)
    }
  }

</script>
</body>
</html>